# Zoned topology configuration for gen-compose-zoned.sh
# Edit this file to change the default topology, or override with env vars.
#
# Usage:
#   ./gen-compose-zoned.sh                          # uses this file
#   BACKBONE_COUNT=5 ./gen-compose-zoned.sh         # override backbone count
#   ORG_SPEC="a:3:2:5,b:2:1:3" ./gen-compose-zoned.sh  # custom orgs
#
# IMPORTANT: For topologies >100 nodes, you MUST bump the Linux ARP neighbour
# table limits BEFORE starting containers. See gen-compose-zoned.sh output or:
#   sudo sysctl -w net.ipv4.neigh.default.gc_thresh1=4096
#   sudo sysctl -w net.ipv4.neigh.default.gc_thresh2=8192
#   sudo sysctl -w net.ipv4.neigh.default.gc_thresh3=16384

# Backbone relay count (internet-facing boot nodes)
BACKBONE_COUNT=5

# Personal nodes connected directly to backbone (no org affiliation)
# These are independent users, roaming agents, or bots.
BACKBONE_PERSONAL=5

# Org definitions: name:edges:keepers:personals
# - edges:     relay nodes bridging org private network to backbone
# - keepers:   archive/secret-keeper nodes (org private network only)
# - personals: agent/human/bot nodes (org private network only)
# Personals field is optional (defaults to 0).
#
# 219-node topology: 12 orgs, 27 edges, 20 keepers, 162 org-personal, 5 bb-personal
ORG_SPEC=alpha:3:3:22,bravo:3:3:20,charlie:3:2:18,delta:2:2:16,echo:2:2:14,foxtrot:2:2:14,golf:2:1:12,hotel:2:1:10,india:2:1:10,juliet:2:1:10,kilo:2:1:8,lima:2:1:8

# Docker image
IMAGE=cordelia-node:test

# API bearer token (shared across all nodes for testing)
BEARER_TOKEN=test-token-fixed

# Log level (warn for scale tests, info/debug for debugging)
RUST_LOG_LEVEL=warn

# Governor targets (scaled for 200+ node topology)
GOV_HOT_MIN=3
GOV_HOT_MAX=30
GOV_WARM_MIN=5
GOV_WARM_MAX=80
GOV_COLD_MAX=200

# Replication intervals (seconds) -- lower for faster test convergence
SYNC_MODERATE=10
SYNC_TACITURN=30

# Proxy (REST API + dashboard). Set PROXY_ENABLED=0 to skip.
PROXY_ENABLED=1
PROXY_IMAGE=cordelia-proxy:test
PROXY_PORT=3847
